<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <title>駅メモマップ2 データエクスポート</title>
  </head>
  <body>
    <p>
      このページでは「駅メモマップ2」のデータバックアップとして、エクスポートを行うことができます。
    </p>
    <p>
      現在お使いのブラウザに保存されている駅データは下記のとおりです。
    </p>
    <p>
      「クリップボードにコピー」ボタンを押してください。
    </p>
    <div>
      <textarea id="display-area" style="width: 50%; height: 140px"></textarea>
    </div>
    <div>
      <input type="button" id="copy-button" value="クリップボードにコピー">
    </div>
    <p>
      エクスポートしたデータは、テキストファイルなりご自身へのメールなりで保存しておいてください。
      <a href="data-import.html">インポート</a> にてデータを設定できます。
    </p>
  </body>
  <script>
    let ekimemo_checkedList = localStorage.getItem('ekimemo_checkedList');
    console.log(document.querySelector('#display-area'));
    console.log(ekimemo_checkedList);
    let display_area = document.querySelector('#display-area');
    display_area.textContent = ekimemo_checkedList;

    document.querySelector("#copy-button").onclick = function() {
	let display_area = document.querySelector('#display-area');
	display_area.select();
	document.execCommand("Copy");
	document.querySelector("#msg").innerHTML = 'コピーが完了しました。';
    };
  </script>
</html>
